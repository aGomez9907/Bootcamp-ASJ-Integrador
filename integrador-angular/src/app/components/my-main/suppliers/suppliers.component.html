<div class="container-fluid px-4">
  <h1 class="mt-4">SUPPLIERS</h1>
  <ol class="breadcrumb mb-4">
    <li class="breadcrumb-item active">Suppliers</li>
  </ol>

  <div class="card mb-4">
    <div class="card-header row px-2 mx-0">
      <div class="col-6"><i class="fas fa-table me-1"></i> Suppliers list</div>
      <div class="col-6 text-end">
        <!-- Button trigger modal -->
        <button
          type="button"
          class="btn btn-primary"
          data-bs-toggle="modal"
          data-bs-target="#agregarProveedorModal"
          id="btn-agregar-proveedor"
        >
          Add new supplier
        </button>
        <!-- Modal -->
        <div
          class="modal fade"
          id="agregarProveedorModal"
          data-bs-backdrop="static"
          data-bs-keyboard="false"
          tabindex="-1"
          aria-labelledby="agregarProveedorModalLabel"
          aria-hidden="true"
        >
          <div class="modal-dialog modal-lg">
            <div class="modal-content">
              <div class="modal-header">
                <h1 class="modal-title fs-5" id="agregarProveedorModalLabel">
                  Agregar proveedor
                </h1>
                <button
                  type="button"
                  class="btn-close"
                  data-bs-dismiss="modal"
                  aria-label="Close"
                ></button>
              </div>
              <div class="modal-body">
                <form
                  #suppliersForm="ngForm"
                  (ngSubmit)="addSupplier(suppliersForm)"
                >
                  <div class="row mb-3">
                    <label
                      for="id-proveedor"
                      class="col-sm-4 col-form-label text-start"
                      >Supplier code</label
                    >
                    <div class="col-sm-8">
                      <input
                        type="text"
                        class="form-control"
                        id="id-proveedor"
                        name="codProv"
                        required=""
                        minlength="4"
                        [(ngModel)]="codProvInput"
                        #name="ngModel"
                      />
                      <div *ngIf="name.errors?.['minlength']" class="col-auto">
                        <span class="form-text text-danger"
                          >Must have at least 4 characters.</span
                        >
                      </div>
                    </div>
                  </div>
                  <div class="row mb-3">
                    <label
                      for="razon-social"
                      class="col-sm-4 col-form-label text-start"
                      >Supplier name</label
                    >
                    <div class="col-sm-8">
                      <input
                        type="text"
                        class="form-control"
                        id="razon-social"
                        name="razonSocial"
                        required=""
                        [(ngModel)]="razonSocialInput"
                      />
                    </div>
                  </div>
                  <div class="row mb-3">
                    <label
                      for="select-rubro"
                      class="col-sm-4 col-form-label text-start"
                      >Rubro</label
                    >
                    <div class="col-sm-8">
                      <input
                        type="text"
                        class="form-control"
                        id="select-rubro"
                        name="rubro"
                        [(ngModel)]="rubroInput"
                      />
                    </div>
                  </div>
                  <div class="row mb-3">
                    <label
                      for="input-web"
                      class="col-sm-4 col-form-label text-start"
                      >Sitio web</label
                    >
                    <div class="col-sm-8">
                      <input
                        type="text"
                        class="form-control"
                        id="input-web"
                        name="website"
                        [(ngModel)]="webInput"
                      />
                    </div>
                  </div>
                  <div class="row mb-3">
                    <label
                      for="input-tel"
                      class="col-sm-4 col-form-label text-start"
                      >Telefono</label
                    >
                    <div class="col-sm-8">
                      <input
                        type="number"
                        class="form-control"
                        id="input-tel"
                        name="telefono"
                        required=""
                        [(ngModel)]="telefonoInput"
                      />
                    </div>
                  </div>
                  <div class="row mb-3">
                    <label
                      for="input-email"
                      class="col-sm-4 col-form-label text-start"
                      >Email</label
                    >
                    <div class="col-sm-8">
                      <input
                        type="email"
                        class="form-control"
                        id="input-email"
                        name="email"
                        [(ngModel)]="emailInput"
                      />
                    </div>
                  </div>
                  <div class="row mb-3">
                    <label
                      for="input-direccion"
                      class="col-sm-4 col-form-label text-start"
                      >Direccion</label
                    >
                    <div class="col-sm-8">
                      <input
                        type="text"
                        class="form-control"
                        id="input-direccion"
                        required=""
                        name="direccion"
                        [(ngModel)]="direccionInput"
                      />
                    </div>
                  </div>
                  <div class="row mb-3">
                    <label
                      for="input-cp"
                      class="col-sm-4 col-form-label text-start"
                      >Codigo Postal</label
                    >
                    <div class="col-sm-8">
                      <input
                        type="text"
                        class="form-control"
                        id="input-cp"
                        name="cp"
                        [(ngModel)]="cpInput"
                      />
                    </div>
                  </div>
                  <div class="row mb-3">
                    <label
                      for="input-localidad"
                      class="col-sm-4 col-form-label text-start"
                      >Localidad</label
                    >
                    <div class="col-sm-8">
                      <input
                        type="text"
                        class="form-control"
                        id="input-localidad"
                        name="localidad"
                        [(ngModel)]="localidadInput"
                      />
                    </div>
                  </div>
                  <div class="row mb-3">
                    <label
                      for="province"
                      class="col-sm-4 col-form-label text-start"
                      >Provincia</label
                    >
                    <div class="col-sm-8">
                      <select
                        class="form-select"
                        name="provincia"
                        id="province"
                        [(ngModel)]="provinciaInput"
                      >
                        <option *ngFor="let province of provinces[paisInput]">
                          {{ province }}
                        </option>
                      </select>
                    </div>
                  </div>
                  <div class="row mb-3">
                    <label
                      for="country"
                      class="col-sm-4 col-form-label text-start"
                      >Pais</label
                    >
                    <div class="col-sm-8">
                      <select
                        class="form-select"
                        id="country"
                        name="pais"
                        [(ngModel)]="paisInput"
                      >
                        <option *ngFor="let country of countries">
                          {{ country }}
                        </option>
                      </select>
                    </div>
                  </div>
                  <div class="row mb-3">
                    <label
                      for="input-cuit"
                      class="col-sm-4 col-form-label text-start"
                      >CUIT</label
                    >
                    <div class="col-sm-8">
                      <input
                        type="text"
                        class="form-control"
                        id="input-cuit"
                        name="cuit"
                        [(ngModel)]="cuitInput"
                      />
                    </div>
                  </div>
                  <div class="row mb-3">
                    <label
                      for="select-iva"
                      class="col-sm-4 col-form-label text-start"
                      >IVA</label
                    >
                    <div class="col-sm-8">
                      <select
                        class="form-select"
                        id="select-iva"
                        name="iva"
                        [(ngModel)]="ivaInput"
                      >
                        <option *ngFor="let i of iva">{{ i.value }}</option>
                      </select>
                    </div>
                  </div>
                  <div class="row mb-3">
                    <label
                      for="nombre-contacto"
                      class="col-sm-4 col-form-label text-start"
                      >Nombre de contacto</label
                    >
                    <div class="col-sm-8">
                      <input
                        type="text"
                        class="form-control"
                        id="nombre-contacto"
                        name="nombreContacto"
                        [(ngModel)]="nombreContactoInput"
                      />
                    </div>
                  </div>
                  <div class="row mb-3">
                    <label
                      for="apellido-contacto"
                      class="col-sm-4 col-form-label text-start"
                      >Apellido de contacto</label
                    >
                    <div class="col-sm-8">
                      <input
                        type="text"
                        class="form-control"
                        id="apellido-contacto"
                        name="apellidoContacto"
                        [(ngModel)]="apellidContactoInput"
                      />
                    </div>
                  </div>
                  <div class="row mb-3">
                    <label
                      for="telefono-contacto"
                      class="col-sm-4 col-form-label text-start"
                      >Telefono de contacto</label
                    >
                    <div class="col-sm-8">
                      <input
                        type="text"
                        class="form-control"
                        id="telefono-contacto"
                        name="telefonoContacto"
                        [(ngModel)]="telefonoContactoInput"
                      />
                    </div>
                  </div>
                  <div class="row mb-3">
                    <label
                      for="email-contacto"
                      class="col-sm-4 col-form-label text-start"
                      >Email de contacto</label
                    >
                    <div class="col-sm-8">
                      <input
                        type="email"
                        class="form-control"
                        id="email-contacto"
                        name="emailContacto"
                        [(ngModel)]="emailContactoInput"
                      />
                    </div>
                  </div>
                  <div class="row mb-3">
                    <label
                      for="rol-contacto"
                      class="col-sm-4 col-form-label text-start"
                      >Rol de contacto</label
                    >
                    <div class="col-sm-8">
                      <input
                        type="text"
                        class="form-control"
                        id="rol-contacto"
                        name="rolContacto"
                        [(ngModel)]="rolContactoInput"
                      />
                    </div>
                  </div>
                  <div class="modal-footer">
                    <button
                      type="button"
                      class="btn btn-secondary"
                      data-bs-dismiss="modal"
                    >
                      Cancelar
                    </button>
                    <button
                      type="submit"
                      class="btn btn-primary"
                      id="guardar-proveedor"
                      data-bs-dismiss="modal"
                      [disabled]="!suppliersForm.valid"
                    >
                      Guardar
                    </button>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <table class="table table-hover card-body">
      <thead>
        <tr>
          <th>ID</th>
          <th>CodProv</th>
          <th>Razon social</th>
          <th>Contacto</th>
          <th>Nombre</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let s of suppliers">
          <td>{{ s.id }}</td>
          <td>{{ s.codProv }}</td>
          <td>{{ s.razonSocial }}</td>
          <td>
            <div>{{ s.emailContacto }}</div>
            <div>{{ s.website }}</div>
            <div>{{ s.telefonoContacto }}</div>
          </td>
          <td>{{ s.nombreContacto + " " + s.apellidoContacto }}</td>
          <td>
            <div class="d-flex flex-row">
              <button
                type="button"
                class="btn btn-outline-success btn-sm"
                value="{{ s.codProv }}"
                [routerLink]="['/suppliers', s.codProv]"
              >
                Detalles
              </button>

              <button
                type="button"
                class="btn btn-outline-primary btn-sm"
                data-bs-toggle="modal"
                data-bs-target="#editarProveedorModal"
                id="btn-agregar-proveedor"
                (click)="loadUpdate(s)"
              >
                Editar
              </button>

              <button
                type="button"
                class="btn btn-outline-danger btn-sm"
                value="{{ s.codProv }}"
                (click)="deleteSupplier(s.id)"
              >
                Borrar
              </button>
            </div>
            <div
              class="modal fade"
              id="editarProveedorModal"
              data-bs-backdrop="static"
              data-bs-keyboard="false"
              tabindex="-1"
              aria-labelledby="editarProveedorModalLabel"
              aria-hidden="true"
            >
              <div class="modal-dialog modal-lg">
                <div class="modal-content">
                  <div class="modal-header">
                    <h1 class="modal-title fs-5" id="editarProveedorModalLabel">
                      Editar proveedor
                    </h1>
                    <button
                      type="button"
                      class="btn-close"
                      data-bs-dismiss="modal"
                      aria-label="Close"
                      (click)="resetFields()"
                    ></button>
                  </div>
                  <div class="modal-body">
                    <form
                      #suppliersUpdateForm="ngForm"
                      (ngSubmit)="updateSupplier(suppliersUpdateForm)"
                    >
                      <input
                        type="number"
                        class="form-control visually-hidden"
                        id="id-proveedor"
                        name="id"
                        [(ngModel)]="idInput"
                      />
                      <div class="row mb-3">
                        <label
                          for="id-proveedor"
                          class="col-sm-4 col-form-label text-start"
                          >Codigo de proveedor</label
                        >
                        <div class="col-sm-8">
                          <input
                            type="text"
                            class="form-control"
                            id="codProv-proveedor"
                            name="codProv"
                            required=""
                            minlength="4"
                            [(ngModel)]="codProvInput"
                          />
                          <div
                            *ngIf="name.errors?.['minlength']"
                            class="col-auto"
                          >
                            <span class="form-text text-danger"
                              >Debe tener al menos 4 caracteres
                              alfanumericos.</span
                            >
                          </div>
                        </div>
                      </div>
                      <div class="row mb-3">
                        <label
                          for="razon-social"
                          class="col-sm-4 col-form-label text-start"
                          >Razon social</label
                        >
                        <div class="col-sm-8">
                          <input
                            type="text"
                            class="form-control"
                            id="razon-social"
                            name="razonSocial"
                            required=""
                            [(ngModel)]="razonSocialInput"
                          />
                        </div>
                      </div>
                      <div class="row mb-3">
                        <label
                          for="select-rubro"
                          class="col-sm-4 col-form-label text-start"
                          >Rubro</label
                        >
                        <div class="col-sm-8">
                          <input
                            type="text"
                            class="form-control"
                            id="select-rubro"
                            name="rubro"
                            [(ngModel)]="rubroInput"
                          />
                        </div>
                      </div>
                      <div class="row mb-3">
                        <label
                          for="input-web"
                          class="col-sm-4 col-form-label text-start"
                          >Sitio web</label
                        >
                        <div class="col-sm-8">
                          <input
                            type="text"
                            class="form-control"
                            id="input-web"
                            name="website"
                            [(ngModel)]="webInput"
                          />
                        </div>
                      </div>
                      <div class="row mb-3">
                        <label
                          for="input-tel"
                          class="col-sm-4 col-form-label text-start"
                          >Telefono</label
                        >
                        <div class="col-sm-8">
                          <input
                            type="number"
                            class="form-control"
                            id="input-tel"
                            name="telefono"
                            required=""
                            [(ngModel)]="telefonoInput"
                          />
                        </div>
                      </div>
                      <div class="row mb-3">
                        <label
                          for="input-email"
                          class="col-sm-4 col-form-label text-start"
                          >Email</label
                        >
                        <div class="col-sm-8">
                          <input
                            type="email"
                            class="form-control"
                            id="input-email"
                            name="email"
                            [(ngModel)]="emailInput"
                          />
                        </div>
                      </div>
                      <div class="row mb-3">
                        <label
                          for="input-direccion"
                          class="col-sm-4 col-form-label text-start"
                          >Direccion</label
                        >
                        <div class="col-sm-8">
                          <input
                            type="text"
                            class="form-control"
                            id="input-direccion"
                            required=""
                            name="direccion"
                            [(ngModel)]="direccionInput"
                          />
                        </div>
                      </div>
                      <div class="row mb-3">
                        <label
                          for="input-cp"
                          class="col-sm-4 col-form-label text-start"
                          >Codigo Postal</label
                        >
                        <div class="col-sm-8">
                          <input
                            type="text"
                            class="form-control"
                            id="input-cp"
                            name="cp"
                            [(ngModel)]="cpInput"
                          />
                        </div>
                      </div>
                      <div class="row mb-3">
                        <label
                          for="input-localidad"
                          class="col-sm-4 col-form-label text-start"
                          >Localidad</label
                        >
                        <div class="col-sm-8">
                          <input
                            type="text"
                            class="form-control"
                            id="input-localidad"
                            name="localidad"
                            [(ngModel)]="localidadInput"
                          />
                        </div>
                      </div>
                      <div class="row mb-3">
                        <label
                          for="province"
                          class="col-sm-4 col-form-label text-start"
                          >Provincia</label
                        >
                        <div class="col-sm-8">
                          <select
                            class="form-select"
                            name="provincia"
                            id="province"
                            [(ngModel)]="provinciaInput"
                          >
                            <option
                              *ngFor="let province of provinces[paisInput]"
                            >
                              {{ province }}
                            </option>
                          </select>
                        </div>
                      </div>
                      <div class="row mb-3">
                        <label
                          for="country"
                          class="col-sm-4 col-form-label text-start"
                          >Pais</label
                        >
                        <div class="col-sm-8">
                          <select
                            class="form-select"
                            id="country"
                            name="pais"
                            [(ngModel)]="paisInput"
                          >
                            <option *ngFor="let country of countries">
                              {{ country }}
                            </option>
                          </select>
                        </div>
                      </div>
                      <div class="row mb-3 visually-hidden">
                        <label
                          for="input-cuit"
                          class="col-sm-4 col-form-label text-start"
                          >CUIT</label
                        >
                        <div class="col-sm-8">
                          <input
                            type="text"
                            class="form-control"
                            id="cuit"
                            disabled
                            name="cuit"
                            [(ngModel)]="cuitInput"
                          />
                        </div>
                      </div>
                      <div class="row mb-3 visually-hidden">
                        <label
                          for="select-iva"
                          class="col-sm-4 col-form-label text-start"
                          >IVA</label
                        >
                        <div class="col-sm-8">
                          <select
                            class="form-select"
                            id="select-iva"
                            name="iva"
                            [(ngModel)]="ivaInput"
                          >
                            <option *ngFor="let i of iva">{{ i.value }}</option>
                          </select>
                        </div>
                      </div>
                      <div class="row mb-3">
                        <label
                          for="nombre-contacto"
                          class="col-sm-4 col-form-label text-start"
                          >Nombre de contacto</label
                        >
                        <div class="col-sm-8">
                          <input
                            type="text"
                            class="form-control"
                            id="nombre-contacto"
                            name="nombreContacto"
                            [(ngModel)]="nombreContactoInput"
                          />
                        </div>
                      </div>
                      <div class="row mb-3">
                        <label
                          for="apellido-contacto"
                          class="col-sm-4 col-form-label text-start"
                          >Apellido de contacto</label
                        >
                        <div class="col-sm-8">
                          <input
                            type="text"
                            class="form-control"
                            id="apellido-contacto"
                            name="apellidoContacto"
                            [(ngModel)]="apellidContactoInput"
                          />
                        </div>
                      </div>
                      <div class="row mb-3">
                        <label
                          for="telefono-contacto"
                          class="col-sm-4 col-form-label text-start"
                          >Telefono de contacto</label
                        >
                        <div class="col-sm-8">
                          <input
                            type="text"
                            class="form-control"
                            id="telefono-contacto"
                            name="telefonoContacto"
                            [(ngModel)]="telefonoContactoInput"
                          />
                        </div>
                      </div>
                      <div class="row mb-3">
                        <label
                          for="email-contacto"
                          class="col-sm-4 col-form-label text-start"
                          >Email de contacto</label
                        >
                        <div class="col-sm-8">
                          <input
                            type="email"
                            class="form-control"
                            id="email-contacto"
                            name="emailContacto"
                            [(ngModel)]="emailContactoInput"
                          />
                        </div>
                      </div>
                      <div class="row mb-3">
                        <label
                          for="rol-contacto"
                          class="col-sm-4 col-form-label text-start"
                          >Rol de contacto</label
                        >
                        <div class="col-sm-8">
                          <input
                            type="text"
                            class="form-control"
                            id="rol-contacto"
                            name="rolContacto"
                            [(ngModel)]="rolContactoInput"
                          />
                        </div>
                      </div>
                      <div class="modal-footer">
                        <button
                          type="button"
                          class="btn btn-secondary"
                          data-bs-dismiss="modal"
                          (click)="resetFields()"
                        >
                          Cancelar
                        </button>
                        <button
                          type="submit"
                          class="btn btn-primary"
                          id="guardar-proveedor"
                          data-bs-dismiss="modal"
                          [disabled]="!suppliersUpdateForm.valid"
                        >
                          Guardar
                        </button>
                      </div>
                    </form>
                  </div>
                </div>
              </div>
            </div>
          </td>
        </tr>
      </tbody>
    </table>

    <!-- <div class="card-body">
      <table id="datatablesSimple">
        <thead>
          <tr>
            <th>ID</th>
            <th>Razon social</th>
            <th>Rubro</th>
            <th>CUIT</th>
            <th>Email</th>
            <th>Direccion</th>
            <th>Telefono</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tfoot>
          <tr>
            <th>ID</th>
            <th>Razon social</th>
            <th>Rubro</th>
            <th>CUIT</th>
            <th>Email</th>
            <th>Direccion</th>
            <th>Telefono</th>
            <th>Acciones</th>
          </tr>
        </tfoot>
        <tbody id="lista-proveedores-tbody"></tbody>
      </table>
    </div> -->
  </div>
</div>
